@namespace AnimalDeCompagnieNoSuBlazor.Pages.Dashboard
@inherits AntDomComponentBase
@page "/maindata"

<Tabs ActiveKeyChanged="OnTabChanged" TabPosition="@TabPosition.Top" Size="@TabSize.Large">
    <TabPane Key="0">
        <Tab><Icon Type="calendar" Theme="outline" />日历</Tab>
        <ChildContent>
            <AntDesign.Calendar DateCellRender="DateCellRender" MonthCellRender="MonthCellRender" OnPanelChange="OnPanelChange" />
        </ChildContent>
    </TabPane>
    <TabPane Key="1">
        <Tab><Icon Type="line-chart" Theme="outline" />救助数量</Tab>
        <ChildContent>
            <StackedArea @ref="_rescueChart" TItem="ChartDataItem" Config="_rescueChartConfig" />
        </ChildContent>
    </TabPane>
    <TabPane Key="2">
        <Tab><Icon Type="dot-chart" Theme="outline" />收养意向</Tab>
        <ChildContent>
            <Funnel @ref="_funnelChart" TItem="ChartFunnelType" Config="_funnelConfig" />
        </ChildContent>
    </TabPane>
    <TabPane Key="3">
        <Tab><Icon Type="crown" Theme="outline" />使用资源</Tab>
        <ChildContent>
            <Row>
                <AntDesign.Col Span="12">
                    <Liquid @ref="_liquidhouseChart" TItem="string" Config="_liquidhouseConfig" />
                </AntDesign.Col>
                <AntDesign.Col Span="12">
                    <Liquid @ref="_liquidfoodChart" TItem="string" Config="_liquidfoodConfig" />
                </AntDesign.Col>
            </Row>
        </ChildContent>
    </TabPane>
    <TabPane Key="4">
        <Tab><Icon Type="pie-chart" Theme="outline" />救助分类</Tab>
        <ChildContent>
            <Row>
                <AntDesign.Col Span="12">
                    <Pie @ref="_pieChart" TItem="ChartPieType" Config="_typeConfig" />
                </AntDesign.Col>
                <AntDesign.Col Span="12">
                    <Pie @ref="_pieageChart" TItem="ChartPieageType" Config="_pieageConfig" />
                </AntDesign.Col>
            </Row>
        </ChildContent>
    </TabPane>
</Tabs>
@code{
    private RenderFragment DateCellRender(DateTime value)
    {
        var listData = GetListData(value);
        return@<Template>
        <ul class="events">
            @foreach (var data in listData)
            {
                <li key="@data.content">
                    <Badge Status="@data.type" Text="@data.content" />
                </li>
            }
        </ul>
    </Template>;
}
private void OnPanelChange(DateTime value, string mode)
{
Console.WriteLine($"{value.ToString("yyyy-MM-dd")} {mode}");
}
private RenderFragment MonthCellRender(DateTime value)
{
return @<Template>
    <div className="notes-month">
        <section>@value.Day</section>
        <span>Backlog number</span>
    </div>
</Template>;
}
} 